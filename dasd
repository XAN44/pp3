import React from 'react'

import { Avatar, Card, CardBody, CardFooter, Image } from '@nextui-org/react'
import Link from 'next/link'
import { Badge } from '@chakra-ui/react'

import { fetchInBlogPage } from '@/lib/actions/user.post'
import {
  Carousel,
  CarouselContent,
  CarouselItem,
  CarouselNext,
  CarouselPrevious,
} from '@/components/ui/carousel'

export default async function Articleinhomepage() {
  const otherInfo = await fetchInBlogPage()
  return (
    <>
      <Carousel
        opts={{
          align: 'start',
        }}
        className="w-full max-w-sm"
      >
        <CarouselContent>
          {otherInfo.map((article, index) => (
            <CarouselItem key={index} className="md:basis-1/2 lg:basis-1/3">
              <>
                <div className="p-1">
                  <Card
                    shadow="sm"
                    radius="lg"
                    isFooterBlurred
                    key="cas"
                    isPressable
                    className="  rounded-l-none rounded-r-none bg-zinc-300"
                  >
                    <CardBody className=" overflow-visible p-0 pt-0">
                      <Image
                        isZoomed
                        src={article.ArticleImage || ' '}
                        alt="articleImage"
                        radius="md"
                        width="100%"
                        className="h-[140px] w-full rounded-xl object-cover"
                      />
                    </CardBody>
                    <CardFooter className="text-small flex place-items-center items-center justify-between px-3">
                      <div className="w-full ">
                        <div className="w-40">
                          <b className="">{article.title}</b>
                          <p className="text-default-500 text-start">
                            {article.articleContent}
                          </p>
                        </div>
                      </div>
                      <div className=" grid place-items-center items-center justify-center">
                        <div className="w-10  ">
                          <Link href={`/profile/${article?.authorId}`}>
                            <Avatar
                              alt="profile"
                              src={article?.author?.image || ''}
                            />
                          </Link>
                        </div>

                        <div className="mt-3">
                          {article.tag ? (
                            article.tag.map((hashTag: any) => (
                              <div
                                className="badge badge-neutral  "
                                key={hashTag.id}
                              >
                                {hashTag.tag}
                              </div>
                            ))
                          ) : (
                            <Badge>ไม่มีแฮชแท็ก</Badge>
                          )}
                        </div>
                      </div>
                    </CardFooter>
                  </Card>
                </div>
              </>
            </CarouselItem>
          ))}
        </CarouselContent>
        <CarouselPrevious />
        <CarouselNext />
      </Carousel>
    </>
  )
}
